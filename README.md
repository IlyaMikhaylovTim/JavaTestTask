# JavaTestTask

Приложение для подсчета популярности фильмов определенного жанра. 

Бизнес-логика контроллера реализована в виде общения с экземпляром класса `GenresPopularityCalculationService`, который, в свою очередь, общается с сервером и хранит получаемые данные в объекте класса `CalculatedData`. После запуска приложения происходит запуск двух методов, помеченных аннотацией `@PostConstruct`, один из которых инициализирует исходные данные объекта `calculatedData`, а второй запускает подсчет популярности фильмов в нескольких параллельных потоках (для числа потоков установлено значение 10). Доступные опции:

- Показать все доступные id фильмов: URI `/showGenresIds`
- Остановить подсчет: URI `/actuator/shutdown`
- Показать число обработанных страниц сервера: URI `/showProcessedPages`
- Показать среднюю популярность фильмов определенного жанра (переменная {genreId}): URI `/showGenrePopularity/{genreId}`. При этом, если подсчет статистики окончен, будет выведено требуемое значение. В противном случае будет выведено предупреждающее сообщение о том, что общение с сервером продолжается.


# Remarks

- Не очень хороший подход в методе `popularityOfGenre` класса `Controller`, а именно - строчка `return service.getData().getGenreToPopularity().get(genre_id) /
                service.getData().getGenreToNumberOfFilms().get(genre_id);`. Стоит оформить ее в метод класса `GenresPopularityCalculationService` и вызывать уже этот метод. То же касается и некоторых других методов в классе `Controller`. Исправляю это в новой версии.
                
- Можно объявить несколько базовых классов, от которых будут наследоваться почти все классы, объявленные в программе, а также переписать код под эти изменения. Данный move может помочь в re-использовании уже написанного кода.
